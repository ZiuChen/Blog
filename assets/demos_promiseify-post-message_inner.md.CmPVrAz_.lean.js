import{d as p,h as l,o as r,c,m as d,t as m,q as f,s as _,_ as u,J as g}from"./chunks/framework.BFSS5Pox.js";function k(){window.addEventListener("message",v)}const i=new Map;function v({data:e,type:a}){if(a==="message"){const{params:t,result:n}=e,s=[t.namespace,t.action,t.id].join("."),o=i.get(s);o&&(o(n),i.delete(s))}}let w=0;function h(e){return new Promise(a=>{if(window.parent){const t=w++,n=[e.namespace,e.action,t].join(".");i.set(n,a);const s=structuredClone(e);s.id=t,window.parent.postMessage(s,"*")}})}const y=e=>(f("data-v-cafa80a5"),e=e(),_(),e),I={class:"inner"},b=y(()=>d("h2",null,"Inner",-1)),S=p({__name:"Inner",setup(e){k();const a=l("");async function t(n){const s=await h({namespace:"user",action:"getUserToken",payload:{userId:n}});s&&(a.value=s)}return(n,s)=>(r(),c("div",I,[b,d("button",{onClick:s[0]||(s[0]=o=>t("123456"))},"getUserToken: "+m(a.value),1)]))}}),C=u(S,[["__scopeId","data-v-cafa80a5"]]),T=JSON.parse('{"title":"","description":"","frontmatter":{"layout":"page","navbar":false,"sidebar":false,"aside":false,"footer":false,"outline":false},"headers":[],"relativePath":"demos/promiseify-post-message/inner.md","filePath":"demos/promiseify-post-message/inner.md","lastUpdated":1712031455000}'),M={name:"demos/promiseify-post-message/inner.md"},U=Object.assign(M,{setup(e){return(a,t)=>(r(),c("div",null,[g(C)]))}});export{T as __pageData,U as default};
