import{d,s as _,o as r,c as p,j as l,t as m,p as f,l as u,_ as g,D as k,I as c,w}from"./chunks/framework.Cipf4DbI.js";function v(){window.addEventListener("message",({data:e,type:a})=>{if(a==="message"){const{params:s,result:t}=e,n=`${s.namespace}.${s.action}_${s.id}`,o=i.get(n);o&&(o(t),i.delete(n))}})}const i=new Map;let y=0;function h(e){return new Promise(a=>{if(window.parent){const s=y++,t=`${e.namespace}.${String(e.action)}_${s}`;i.set(t,a),window.parent.postMessage({id:s,...e},"*")}})}const C=e=>(f("data-v-cafa80a5"),e=e(),u(),e),I={class:"inner"},$=C(()=>l("h2",null,"Inner",-1)),S=d({__name:"Inner",setup(e){v();const a=_("");async function s(t){const n=await h({namespace:"user",action:"getUserToken",payload:{userId:t}});n&&(a.value=n)}return(t,n)=>(r(),p("div",I,[$,l("button",{onClick:n[0]||(n[0]=o=>s("123456"))},"getUserToken: "+m(a.value),1)]))}}),b=g(S,[["__scopeId","data-v-cafa80a5"]]),D=JSON.parse('{"title":"","description":"","frontmatter":{"layout":"page","navbar":false,"sidebar":false,"aside":false,"footer":false,"outline":false},"headers":[],"relativePath":"demos/promiseify-post-message/inner.md","filePath":"demos/promiseify-post-message/inner.md","lastUpdated":1717316735000}'),x={name:"demos/promiseify-post-message/inner.md"},O=Object.assign(x,{setup(e){return(a,s)=>{const t=k("ClientOnly");return r(),p("div",null,[c(t,null,{default:w(()=>[c(b)]),_:1})])}}});export{D as __pageData,O as default};
